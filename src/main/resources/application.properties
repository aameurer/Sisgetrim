spring.application.name=sisgetrim

# Configuração do Banco de Dados PostgreSQL
spring.datasource.url=jdbc:postgresql://localhost:5432/db_sisgetrim
spring.datasource.username=postgres
spring.datasource.password=admin
spring.datasource.driver-class-name=org.postgresql.Driver

# Configuração JPA/Hibernate
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true

# Configuração Flyway
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
spring.flyway.baseline-version=0
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true

# Configuração de Sessão
server.servlet.session.timeout=30m

# ==========================================
# OTIMIZAÇÕES PARA ALTO VOLUME DE TRÁFEGO
# ==========================================

# 1. Tuning do Pool de Conexões (HikariCP)
spring.datasource.hikari.maximum-pool-size=30
spring.datasource.hikari.minimum-idle=10
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.max-lifetime=1200000

# 2. Compressão de Resposta (Economia de Banda)
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.compression.min-response-size=1024

# 3. Cache de Recursos Estáticos (Performance Frontend)
spring.web.resources.cache.period=2592000
spring.web.resources.cache.cachecontrol.max-age=30d
spring.web.resources.cache.cachecontrol.cache-public=true

# 4. Monitoramento e Saúde (Actuator)
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when_authorized

# 5. Performance JPA/Hibernate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.generate_statistics=false
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# 6. Configuração de Upload de Arquivos (Multipart)
spring.servlet.multipart.max-file-size=50MB
spring.servlet.multipart.max-request-size=50MB

# 7. Tuning Tomcat para Grandes Uploads (Evita ERR_CONNECTION_RESET)
server.tomcat.max-swallow-size=-1
server.tomcat.max-http-form-post-size=-1

